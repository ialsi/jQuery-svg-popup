!function(t,i){function e(i,e){this.element=i,this.config=t.extend({},n,e),this._defaults=n,this._name=o,this.init()}var o="svgpopup",n={stepX:12,stepY:12,fill:"#03BDD6",fillOdd:null,fillEven:null,strokeFill:null,opacity:.8,speed:1.8,figure:"triangle",visible:!1,randomize:!0,closeButtonText:"&#10006;",width:t(i).width(),height:t(i).height(),onAnimationComplate:function(){}};e.prototype.init=function(){var i=this.element,e=this.config,o={svg:null,poligon:null,content:null,sizeX:this.config.width/this.config.stepX,sizeY:this.config.height/this.config.stepY,getRandomInt:function(t,i){return Math.floor(Math.random()*(i-t+1))+t},createPolygon:function(t,i){var n=null;return"triangle"===e.figure?n={first:t*o.sizeX+","+i*o.sizeY+" "+(t+1)*o.sizeX+","+i*o.sizeY+" "+t*o.sizeX+","+(i+1)*o.sizeY,second:t*o.sizeX+","+(i+1)*o.sizeY+" "+(t+1)*o.sizeX+","+i*o.sizeY+" "+(t+1)*o.sizeX+","+(i+1)*o.sizeY}:"rectangle"===e.figure&&(n=t*o.sizeX+","+i*o.sizeY+" "+(t+1)*o.sizeX+","+i*o.sizeY+" "+(t+1)*o.sizeX+","+(i+1)*o.sizeY+" "+t*o.sizeX+","+(i+1)*o.sizeY),n},createMarkup:function(t){for(var i=(e.width/e.stepX,e.height/e.stepY,'<svg class="svg-popup-particles-wrap '+t+'">'),n=0;n<e.stepX;n++)for(var s=0;s<e.stepY;s++){var a=o.createPolygon(n,s),l={odd:null===e.fillOdd?e.fill:e.fillOdd,even:null===e.fillEven?e.fill:e.fillEven},p=null===e.strokeFill?l.odd:e.strokeFill,r=o.getRandomInt(0,e.width),d=o.getRandomInt(0,e.height),g=o.getRandomInt(0,e.width),c=o.getRandomInt(0,e.height),f=e.randomize===!0?o.getRandomInt(0,360):0,h=e.randomize===!0?o.getRandomInt(0,360):0,u="opacity: "+e.opacity+";position:absolute;-webkit-transform:translate("+r+"px,"+d+"px) rotateX("+f+"deg) rotateY("+h+"deg);",y="opacity: "+e.opacity+";position:absolute;-webkit-transform:translate("+g+"px,"+c+"px) rotateX("+f+"deg) rotateY("+h+"deg);";if("triangle"===e.figure)i+='<polygon data-posx="'+r+'" data-rotationy="'+h+'" data-rotationx="'+f+'" data-posy="'+d+'" style="'+u+'" fill="'+l.odd+'" stroke="'+p+'" points="'+a.first+'"></polygon>',i+='<polygon data-posx="'+g+'" data-rotationy="'+h+'" data-rotationx="'+f+'" " data-posy="'+c+'" style="'+y+'" fill="'+l.even+'" stroke="'+p+'" points="'+a.second+'"></polygon>';else if("rectangle"===e.figure){var v=(s+n)%2===0?l.odd:l.even,p=null===e.strokeFill?v:e.strokeFill;i+='<polygon data-posx="'+r+'" data-rotationy="'+h+'" data-rotationx="'+f+'" data-posy="'+d+'" style="'+u+'" fill="'+v+'" stroke="'+p+'" points="'+a+'"></polygon>'}}return i+="</svg>"},destroyPolygon:function(i){for(var n=0;n<this.polygon.length;n++){var s=t(this.polygon[n]),a=s.attr("data-posx"),l=s.attr("data-posy"),p=s.attr("data-rotationy"),r=s.attr("data-rotationx");s.css({transform:"translate("+a+"px,"+l+"px) rotateX("+r+"deg) rotateY("+p+"deg)","-webkit-transform":"translate("+a+"px,"+l+"px) rotateX("+r+"deg) rotateY("+p+"deg)",opacity:e.visible===!1?0:e.opacity})}i.detach(),this.content.css({top:e.height+"%"}),setTimeout(function(){o.svg.css({"z-index":"-1"})},1e3*e.speed)},animPolygon:function(){this.svg.css({opacity:e.opacity,"z-index":"10000"}),this.polygon.css({transform:" translate(0,0) rotateX(0deg) rotateY(0deg)","-webkit-transform":" translate(0,0) rotateX(0deg) rotateY(0deg)",transition:"all "+e.speed+"s","-webkit-transition":"all "+e.speed+"s",opacity:"1"}),setTimeout(function(){o.content.css({top:"50%"}).append('<span class="svg-popup-close">'+e.closeButtonText+"</span>"),t(".svg-popup-close").on("click",function(){o.destroyPolygon(t(this))}),e.onAnimationComplate(i)},1e3*e.speed)},init:function(){this.content=t("#"+t(i).data("svg-popup")).append(o.createMarkup(t(i).data("svg-popup"))).find(".svg-popup-content").css({position:"fixed",left:"50%",top:e.height+"%","z-index":"10001",transform:"translate(-50%,-50%)","-webkit-transform":"translate(-50%,-50%)","-webkit-transition":"top 0.3s",transition:"top 0.3s"}),this.svg=t("#"+t(i).data("svg-popup")).find("svg.svg-popup-particles-wrap"),this.polygon=this.svg.find("polygon"),this.svg.css({width:e.width+"px",height:e.height+"px",opacity:e.visible===!1?0:1,position:"fixed",top:"0px",left:"0px",overflow:"hidden","z-index":"-1"}),t(i).on("click",function(){o.animPolygon()})}};o.init()},t.fn[o]=function(i){return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new e(this,i))})}}(jQuery,window,document);