!function(o){o.fn.svgpopup=function(t){var i={stepX:12,stepY:12,fill:"#03BDD6",fillOdd:null,fillEven:null,strokeFill:null,opacity:.8,speed:1.8,figure:"triangle",visible:!1,randomize:!0,closeButtonText:"&#10006;",width:o(window).width(),height:o(window).height(),onAnimationComplate:function(){}};return this.each(function(){config=o.extend({},i,t),that=o(this),popup={svg:null,poligon:null,content:null,sizeX:config.width/config.stepX,sizeY:config.height/config.stepY,getRandomInt:function(o,t){return Math.floor(Math.random()*(t-o+1))+o},createPolygon:function(o,t){var i=null;return"triangle"===config.figure?i={first:o*popup.sizeX+","+t*popup.sizeY+" "+(o+1)*popup.sizeX+","+t*popup.sizeY+" "+o*popup.sizeX+","+(t+1)*popup.sizeY,second:o*popup.sizeX+","+(t+1)*popup.sizeY+" "+(o+1)*popup.sizeX+","+t*popup.sizeY+" "+(o+1)*popup.sizeX+","+(t+1)*popup.sizeY}:"rectangle"===config.figure&&(i=o*popup.sizeX+","+t*popup.sizeY+" "+(o+1)*popup.sizeX+","+t*popup.sizeY+" "+(o+1)*popup.sizeX+","+(t+1)*popup.sizeY+" "+o*popup.sizeX+","+(t+1)*popup.sizeY),i},createMarkup:function(){for(var o=(config.width/config.stepX,config.height/config.stepY,'<svg class="svg-popup-particles-wrap">'),t=0;t<config.stepX;t++)for(var i=0;i<config.stepY;i++){var n=popup.createPolygon(t,i),p={odd:null===config.fillOdd?config.fill:config.fillOdd,even:null===config.fillEven?config.fill:config.fillEven},e=null===config.strokeFill?config.fill:config.strokeFill,s=popup.getRandomInt(0,config.width),a=popup.getRandomInt(0,config.height),l=popup.getRandomInt(0,config.width),g=popup.getRandomInt(0,config.height),c=config.randomize===!0?popup.getRandomInt(0,360):0,f=config.randomize===!0?popup.getRandomInt(0,360):0,r="opacity: "+config.opacity+";position:absolute;transform:translate("+s+"px,"+a+"px) rotateX("+c+"deg) rotateY("+f+"deg);",d="opacity: "+config.opacity+";position:absolute;transform:translate("+l+"px,"+g+"px) rotateX("+c+"deg) rotateY("+f+"deg);";if("triangle"===config.figure)o+='<polygon data-posx="'+s+'" data-rotationy="'+f+'" data-rotationx="'+c+'" data-posy="'+a+'" style="'+r+'" fill="'+p.odd+'" stroke="'+e+'" points="'+n.first+'"></polygon>',o+='<polygon data-posx="'+l+'" data-rotationy="'+f+'" data-rotationx="'+c+'" " data-posy="'+g+'" style="'+d+'" fill="'+p.even+'" stroke="'+e+'" points="'+n.second+'"></polygon>';else if("rectangle"===config.figure){var u=(i+t)%2===0?p.odd:p.even,e=null===config.strokeFill?u:config.strokeFill;o+='<polygon data-posx="'+s+'" data-rotationy="'+f+'" data-rotationx="'+c+'" data-posy="'+a+'" style="'+r+'" fill="'+u+'" stroke="'+e+'" points="'+n+'"></polygon>'}}return o+="</svg>"},destroyPolygon:function(t){for(var i=0;i<this.polygon.length;i++){var n=o(this.polygon[i]),p=n.attr("data-posx"),e=n.attr("data-posy"),s=n.attr("data-rotationy"),a=n.attr("data-rotationx");n.css({transform:"translate("+p+"px,"+e+"px) rotateX("+a+"deg) rotateY("+s+"deg)",opacity:config.visible===!1?0:config.opacity})}t.detach(),this.content.css({top:"110%"}),setTimeout(function(){popup.svg.css({"z-index":"-1"})},1e3*config.speed)},animPolygon:function(){this.svg.css({opacity:config.opacity,"z-index":"10000"}),this.polygon.css({transform:" translate(0,0) rotateX(0deg) rotateY(0deg)",transition:"all "+config.speed+"s",opacity:"1"}),setTimeout(function(){popup.content.css({top:"50%"}).append('<span class="svg-popup-close">'+config.closeButtonText+"</span>"),o(".svg-popup-close").on("click",function(){popup.destroyPolygon(o(this))}),config.onAnimationComplate(that)},1e3*config.speed)},init:function(){this.content=o("#"+that.data("svg-popup")).append(popup.createMarkup()).find(".svg-popup-content").css({position:"fixed",left:"50%",top:"110%","z-index":"10001",transform:"translate(-50%,-50%)",transition:"top 0.3s"}),this.svg=o("#"+that.data("svg-popup")).find("svg.svg-popup-particles-wrap"),this.polygon=this.svg.find("polygon"),this.svg.css({width:config.width+"px",height:config.height+"px",opacity:config.visible===!1?0:1,position:"fixed",top:"0px",left:"0px",overflow:"hidden","z-index":"-1"}),that.on("click",function(){popup.animPolygon()})}},popup.init()})}}(jQuery);